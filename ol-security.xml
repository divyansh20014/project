<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:security="http://www.springframework.org/schema/security"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring
       http://camel.apache.org/schema/spring/camel-spring.xsd
       http://camel.apache.org/schema/spring-security
       http://camel.apache.org/schema/spring-security/camel-spring-security.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security.xsd">

    <sslContextParameters xmlns="http://camel.apache.org/schema/spring" id="sslContextParameters">
        <secureSocketProtocols>
            <secureSocketProtocol>TLSv1.2</secureSocketProtocol>
            <secureSocketProtocol>TLSv1.3</secureSocketProtocol>
        </secureSocketProtocols>
        <keyManagers keyPassword="{{passPhraseForKeyRest}}">
            <keyStore resource="{{keyStoreForRest}}" password="{{passPhraseForKeyStoreRest}}"/>
        </keyManagers>
        <trustManagers>
            <keyStore resource="{{trustStoreForRest}}" password="{{passPhraseForTrustStoreRest}}"/>
        </trustManagers>
    </sslContextParameters>

    <sslContextServerParameters>
        <clientAuthentication>REQUIRE</clientAuthentication>
    </sslContextServerParameters>
</beans>


<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://camel.apache.org/schema/spring 
           http://camel.apache.org/schema/spring/camel-spring.xsd">

    <!-- SSL Context Parameters -->
    <camel:sslContextParameters id="sslContextParameters">
        <camel:keyManagers keyPassword="{{keyPassword}}">
            <camel:keyStore resource="{{serverKeystore}}" password="{{keystorePassword}}" />
        </camel:keyManagers>
        <camel:trustManagers>
            <camel:keyStore resource="{{serverTruststore}}" password="{{truststorePassword}}" />
        </camel:trustManagers>
        <camel:serverParameters>
            <camel:clientAuthentication>REQUIRE</camel:clientAuthentication>
        </camel:serverParameters>
    </camel:sslContextParameters>

</beans>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://camel.apache.org/schema/spring 
           http://camel.apache.org/schema/spring/camel-spring.xsd">

    <!-- Define a simple test Camel route -->
    <camel:camelContext id="testCamelContext">
        <camel:route>
            <camel:from uri="timer:test?period=1000"/>
            <camel:log message="Test route running every second"/>
        </camel:route>
    </camel:camelContext>

</beans>

